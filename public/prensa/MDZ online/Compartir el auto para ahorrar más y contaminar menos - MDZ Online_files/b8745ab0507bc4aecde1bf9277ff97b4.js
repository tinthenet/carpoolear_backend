
var nota={}
nota.print=function(url){vsm.ajaxCall(url);window.print();}
var authorvideo={}
authorvideo.speak=function(){var v=vsm.object('author-video');var vp=vsm.object('author-video-wrapper');var b=vsm.object('author-video-play');if(document.createElement('video').canPlayType&&!vsm.browser.firefox){v.src=vp.getAttribute('data-presentacion');v.play();if(vsm.browser.chrome)v.setAttribute('controls',1);}else{v=vsm.object('author-video_swf');var vid=vp.getAttribute('data-presentacion');v.loadmedia('',vid);v.playmedia();v.disableloop();}
v.loop=false;b.style.display='none';}
authorvideo.end=function(){var v=vsm.object('author-video');var vp=vsm.object('author-video-wrapper');var b=vsm.object('author-video-play');if(document.createElement('video').canPlayType&&!vsm.browser.firefox){v.src=vp.getAttribute('data-loop');}else{v=vsm.object('author-video_swf');var vid=vp.getAttribute('data-loop');v.loadmedia('',vid);v.playmedia();v.enableloop();}
v.loop=true;b.style.display='block';}
var poll={}
poll.loadResults=function(itemID,url){var optionsHTML=document.getElementById('polloptions-'+itemID);optionsHTML.className+=' hidden';var loadingHTML=document.getElementById('pollloading-'+itemID);vsm.replaceClass(loadingHTML,'hidden','visible');vsm.ajaxCall(url,function(response){poll.voteOK(itemID,response)},function(){poll.voteOK(itemID,'No se pudo cargar los resultados de la encuesta')});return false;}
poll.voteOK=function(itemID,response){var resultsHTML=document.getElementById('pollresults-'+itemID);var loadingHTML=document.getElementById('pollloading-'+itemID);vsm.replaceClass(resultsHTML,'hidden','loading');resultsHTML.innerHTML=response;if(getCookie('poll-'+resultsHTML.getAttribute('data-ot')+"-"+resultsHTML.getAttribute('data-oid'))){link=document.getElementById('polllink-'+itemID);if(link)(link.parentNode).removeChild(link);}
loadingHTML.className+=' hidden';setTimeout(function(){vsm.replaceClass(resultsHTML,'loading','');},1);}
poll.voteError=function(itemID,response){var optionsHTML=document.getElementById('polloptions-'+itemID);var loadingHTML=document.getElementById('pollloading-'+itemID);loadingHTML.className+=' hidden';vsm.replaceClass(optionsHTML,'hidden','');alert(response);}
poll.goBack=function(itemID){var link=itemID;for(;itemID;itemID=itemID.parentNode){if(itemID.getAttribute('data-itemid')){itemID=itemID.getAttribute('data-itemid');break;}}
if(!itemID)link.parentNode.removeChild(link);var optionsHTML=document.getElementById('polloptions-'+itemID);var resultsHTML=document.getElementById('pollresults-'+itemID);resultsHTML.className+=' hidden';vsm.replaceClass(optionsHTML,'hidden','');return false;}
poll.vote=function(itemID,optID){var optionsHTML=document.getElementById('polloptions-'+itemID);var pollcaptcha=vsm.object('pollcaptcha-'+itemID);optionsHTML.className+=' hidden';var loadingHTML=document.getElementById('pollloading-'+itemID);vsm.replaceClass(loadingHTML,'hidden','');var option=document.getElementById('pollopt-'+itemID);option.value=optID;if(pollcaptcha){pollcaptcha.innerHTML='';grecaptcha.render('pollcaptcha-'+itemID,{'sitekey':pollcaptcha.getAttribute('data-sitekey'),'callback':function(response){poll.captchaResponse(response,itemID)}});setTimeout(function(){vsm.addClass(pollcaptcha.parentNode,'visible');vsm.replaceClass(loadingHTML,'visible','hidden');},2000);}else{poll.submit(itemID);}}
poll.captchaResponse=function(response,itemID){var loadingHTML=vsm.object('pollloading-'+itemID);var pollcaptcha=vsm.object('pollcaptcha-'+itemID);var pollcaptchainput=vsm.object('pollcaptcha-input'+itemID);pollcaptchainput.value=response;vsm.removeClass(pollcaptcha.parentNode,'visible');vsm.replaceClass(loadingHTML,'hidden','visible');poll.submit(itemID);};poll.submit=function(itemID){var frm=vsm.object('pollfrm-'+itemID);vsmAjaxForm(frm,function(response){poll.voteOK(itemID,response)},function(response){poll.voteError(itemID,response)});}